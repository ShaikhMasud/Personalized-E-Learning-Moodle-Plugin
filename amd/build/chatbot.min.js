define("local_automation/chatbot",["jquery","core/templates"],(function($,Templates){function saveMessage(text,sender){let history=localStorage.getItem("ai_chat_history");history=history?JSON.parse(history):[],history.push({text:text,sender:sender}),localStorage.setItem("ai_chat_history",JSON.stringify(history))}function appendMessage(text,sender){let store=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const className="user"===sender?"msg-user":"msg-bot";$("#chatbot-messages").append('<div class="message '.concat(className,'">').concat(text,"</div>")),store&&saveMessage(text,sender),scrollMessagesToBottom()}function scrollMessagesToBottom(){const msgBox=$("#chatbot-messages")[0];msgBox&&(msgBox.scrollTop=msgBox.scrollHeight)}function handleSend(){const input=$("#chatbot-input"),text=input.val().trim();text&&(appendMessage(text,"user"),console.log("User typed:",text),input.val(""),setTimeout((()=>{appendMessage("Working âœ…","bot")}),500))}return{init:function(){Templates.render("local_automation/chatbot",{}).then((html=>{$("body").append(html),$("#ai-chatbot-button").on("click",(()=>{$("#ai-chatbot-modal").toggleClass("hidden"),$("#chatbot-input").focus()})),$("#chatbot-close-btn").on("click",(()=>{$("#ai-chatbot-modal").addClass("hidden")})),$("#chatbot-send-btn").on("click",handleSend),$("#chatbot-input").on("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),handleSend())})),function(){let history=localStorage.getItem("ai_chat_history");history&&(history=JSON.parse(history),history.forEach((msg=>appendMessage(msg.text,msg.sender,!1))),scrollMessagesToBottom())}()})).catch((err=>console.error("Chatbot template load failed:",err)))}}}));

//# sourceMappingURL=chatbot.min.js.map