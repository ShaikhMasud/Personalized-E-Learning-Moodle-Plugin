{"version":3,"file":"navigation.min.js","sources":["../src/navigation.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/templates'], function($, Ajax, Templates) {\n\n    /**\n     * Bind UI event handlers for navigation helper.\n     */\n    function bindHandlers() {\n        // Toggle modal on button click\n        $('#nav-helper-button').on('click', function() {\n            $('#nav-helper-modal').toggleClass('hidden');\n            $('#nav-helper-input').trigger('focus');\n        });\n\n        // Handle search input\n        $('#nav-helper-input').on('keyup', function() {\n            const query = $(this).val().trim();\n            if (query.length < 3) {\n                $('#nav-helper-results').empty();\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'local_automation_navsearch',\n                args: {\n                    query: query\n                },\n                done: function(results) {\n                    const $list = $('#nav-helper-results');\n                    $list.empty();\n                    if (!results || results.length === 0) {\n                        $list.append('<li>No matches found</li>');\n                    } else {\n                        results.forEach(r => {\n                            const name = $('<div/>').text(r.name).html();\n                            const url  = $('<div/>').text(r.url).html();\n                            $list.append(`<li><a href=\"${url}\">${name}</a></li>`);\n                        });\n                    }\n                },\n                fail: function(err) {\n                    console.error('navsearch failed:', err);\n                }\n            }]);\n        });\n\n        $('#nav-helper-input').on('keypress', function(e) {\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                const $firstLink = $('#nav-helper-results li a').first();\n                if ($firstLink.length) {\n                    window.location.href = $firstLink.attr('href');\n                }\n            }\n        });\n\n        // Search button click navigates to first result\n        $('#nav-helper-search-btn').on('click', function() {\n            const $firstLink = $('#nav-helper-results li a').first();\n            if ($firstLink.length) {\n                window.location.href = $firstLink.attr('href');\n            }\n        });\n    }\n\n    /**\n     * Initialise the navigation helper modal.\n     */\n    function init() {\n        // Render mustache and append to body once.\n        return Templates.render('local_automation/navigation', {})\n            .then(function(html, js) {\n                $('body').append(html);\n                Templates.runTemplateJS(js);\n                bindHandlers();\n            })\n            .catch(function(e) {\n                // eslint-disable-next-line no-console\n                console.error('Failed to render navigation template:', e);\n            });\n    }\n\n    return {init: init};\n});\n"],"names":["define","$","Ajax","Templates","init","render","then","html","js","append","runTemplateJS","on","toggleClass","trigger","query","this","val","trim","length","empty","call","methodname","args","done","results","$list","forEach","r","name","text","url","fail","err","console","error","e","key","preventDefault","$firstLink","first","window","location","href","attr","catch"],"mappings":"AAAAA,qCAAO,CAAC,SAAU,YAAa,mBAAmB,SAASC,EAAGC,KAAMC,iBAgFzD,CAACC,uBAZGD,UAAUE,OAAO,8BAA+B,IAClDC,MAAK,SAASC,KAAMC,IACjBP,EAAE,QAAQQ,OAAOF,MACjBJ,UAAUO,cAAcF,IAhEhCP,EAAE,sBAAsBU,GAAG,SAAS,WAChCV,EAAE,qBAAqBW,YAAY,UACnCX,EAAE,qBAAqBY,QAAQ,YAInCZ,EAAE,qBAAqBU,GAAG,SAAS,iBACzBG,MAAQb,EAAEc,MAAMC,MAAMC,OACxBH,MAAMI,OAAS,EACfjB,EAAE,uBAAuBkB,QAI7BjB,KAAKkB,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CACFR,MAAOA,OAEXS,KAAM,SAASC,eACLC,MAAQxB,EAAE,uBAChBwB,MAAMN,QACDK,SAA8B,IAAnBA,QAAQN,OAGpBM,QAAQE,SAAQC,UACNC,KAAO3B,EAAE,UAAU4B,KAAKF,EAAEC,MAAMrB,OAChCuB,IAAO7B,EAAE,UAAU4B,KAAKF,EAAEG,KAAKvB,OACrCkB,MAAMhB,8BAAuBqB,iBAAQF,sBALzCH,MAAMhB,OAAO,8BASrBsB,KAAM,SAASC,KACXC,QAAQC,MAAM,oBAAqBF,YAK/C/B,EAAE,qBAAqBU,GAAG,YAAY,SAASwB,MAC7B,UAAVA,EAAEC,IAAiB,CACnBD,EAAEE,uBACIC,WAAarC,EAAE,4BAA4BsC,QAC7CD,WAAWpB,SACXsB,OAAOC,SAASC,KAAOJ,WAAWK,KAAK,aAMnD1C,EAAE,0BAA0BU,GAAG,SAAS,iBAC9B2B,WAAarC,EAAE,4BAA4BsC,QAC7CD,WAAWpB,SACXsB,OAAOC,SAASC,KAAOJ,WAAWK,KAAK,eAgB1CC,OAAM,SAAST,GAEZF,QAAQC,MAAM,wCAAyCC"}